# Development Workflow and Standards

Comprehensive development workflow standards covering commits, file naming, documentation, and testing practices.

<rule>
name: development_workflow
description: Development workflow standards including commits, file organization, documentation, and testing
filters:
  - type: file_extension
    pattern: ".*"
  - type: content
    pattern: "(git|commit|test|doc|header|naming|workflow|co-authored|claude|gpt|ai|assisted)"
  - type: context
    pattern: "(development|workflow|standards|quality|commit|attribution)"
  - type: content
    pattern: "(co-authored|claude|gpt|assisted by|ai helped|generated with)"

actions:
  - type: suggest
    when: "commit_standards"
    message: |
      **Commit Standards:**

      **Conventional Commit Format:**
      ```
      <type>(<scope>): <description>

      [optional body]

      [optional footer]
      ```

      **Types:**
      - `feat`: New feature
      - `fix`: Bug fix
      - `docs`: Documentation changes
      - `style`: Code style changes
      - `refactor`: Code refactoring
      - `perf`: Performance improvements
      - `test`: Adding or updating tests
      - `chore`: Maintenance tasks

      **Examples:**
      ```bash
      # Good commits
      feat(auth): add JWT token authentication
      fix(api): resolve user creation validation issue
      docs(readme): update installation instructions
      test(user): add unit tests for user service
      refactor(models): extract user validation logic
      
      # Bad commits
      git commit -m "fix bug"
      git commit -m "update stuff"
      git commit -m "wip"
      git commit -m "feat: add user auth - Co-authored-by: Claude"
      git commit -m "fix: resolve issue with AI help"
      git commit -m "docs: update README - assisted by GPT"
      ```

      **Commit Message Guidelines:**
      - Use imperative mood ("add" not "added")
      - Keep subject line under 50 characters
      - Start with lowercase letter
      - No period at the end
      - Include scope for better categorization
      - **NEVER include "Co-authored-by" or AI assistant attribution**
      - **NEVER mention Claude, GPT, or any AI assistant in commits**
      - **NEVER use "AI helped" or similar phrases**

  - type: suggest
    when: "ai_attribution_detected"
    message: |
      **üö´ AI Attribution Prohibited:**

      **NEVER include AI assistant attribution in commit messages:**
      - ‚ùå `Co-authored-by: Claude`
      - ‚ùå `Co-authored-by: GPT`
      - ‚ùå `Assisted by AI`
      - ‚ùå `AI helped with this`
      - ‚ùå `Generated with Claude`
      - ‚ùå `Thanks to GPT`

      **Why this matters:**
      - Commit messages should reflect human authorship
      - AI tools are development aids, not co-authors
      - Maintains professional development practices
      - Avoids potential legal/licensing complications

      **Correct approach:**
      - Write commit messages as if you authored the code
      - Focus on what the commit accomplishes
      - Keep attribution for actual human collaborators only

  - type: suggest
    when: "file_organization"
    message: |
      **File Organization Standards:**

      **Python File Naming:**
      ```python
      # Use snake_case for Python files
      user_models.py          # ‚úÖ Good
      user_services.py        # ‚úÖ Good
      test_user_models.py     # ‚úÖ Good
      
      # Avoid these patterns
      userModels.py           # ‚ùå camelCase
      UserModels.py           # ‚ùå PascalCase
      user-models.py          # ‚ùå kebab-case
      ```

      **JavaScript/TypeScript File Naming:**
      ```javascript
      // Use camelCase for JavaScript/TypeScript files
      userService.js          # ‚úÖ Good
      userController.js       # ‚úÖ Good
      
      // React components use PascalCase
      UserProfile.jsx         # ‚úÖ Good
      UserProfile.tsx         # ‚úÖ Good
      
      // Avoid these patterns
      user_service.js         # ‚ùå snake_case
      UserService.js          # ‚ùå PascalCase (except components)
      ```

      **Directory Structure:**
      ```
      project/
      ‚îú‚îÄ‚îÄ src/                    # Source code
      ‚îÇ   ‚îú‚îÄ‚îÄ models/             # Data models
      ‚îÇ   ‚îú‚îÄ‚îÄ services/           # Business logic
      ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Utility functions
      ‚îÇ   ‚îî‚îÄ‚îÄ tests/              # Test files
      ‚îú‚îÄ‚îÄ docs/                   # Documentation
      ‚îú‚îÄ‚îÄ config/                 # Configuration
      ‚îú‚îÄ‚îÄ scripts/                # Build scripts
      ‚îî‚îÄ‚îÄ requirements.txt        # Dependencies
      ```

  - type: suggest
    when: "file_documentation"
    message: |
      **File Documentation Standards:**

      **Python File Headers:**
      ```python
      """
      User Service Module
      
      Purpose: Business logic for user management operations
      Dependencies: models.User, services.EmailService, utils.validators
      
      This module provides user creation, authentication, and profile
      management functionality with comprehensive error handling.
      
      Usage:
          from services.user_service import UserService
          service = UserService()
          user = service.create_user(user_data)
      
      Author: John Doe <john.doe@example.com>
      Created: 2024-01-15
      Version: 1.2.0
      """
      
      import logging
      from typing import Dict, Optional
      
      from .models import User
      from .services import EmailService
      from .utils import validators
      
      logger = logging.getLogger(__name__)
      ```

      **JavaScript/TypeScript File Headers:**
      ```javascript
      /**
       * User Service Module
       * 
       * Purpose: Business logic for user management operations
       * Dependencies: models/User, services/EmailService, utils/validators
       * 
       * This module provides user creation, authentication, and profile
       * management functionality with comprehensive error handling.
       * 
       * @example
       * import UserService from './services/UserService';
       * const service = new UserService();
       * const user = await service.createUser(userData);
       * 
       * @author John Doe <john.doe@example.com>
       * @created 2024-01-15
       * @version 1.2.0
       */
      
      import { User } from '../models/User';
      import { EmailService } from './EmailService';
      import { validateEmail } from '../utils/validators';
      ```

  - type: suggest
    when: "testing_standards"
    message: |
      **Testing Standards:**

      **Test Structure (AAA Pattern):**
      ```python
      def test_user_creation_success():
          # Arrange - Set up test data and dependencies
          user_data = {
              'email': 'test@example.com',
              'name': 'Test User',
              'password': 'testpass123'
          }
          mock_email_service = Mock()
          user_service = UserService(email_service=mock_email_service)
          
          # Act - Execute the function being tested
          result = user_service.create_user(user_data)
          
          # Assert - Verify the expected outcomes
          assert result.email == user_data['email']
          assert result.name == user_data['name']
          mock_email_service.send_welcome_email.assert_called_once_with(result.email)
      ```

      **Test Naming Conventions:**
      ```python
      # Good test names
      def test_create_user_with_valid_data_returns_user():
      def test_create_user_with_existing_email_raises_error():
      def test_user_password_is_hashed_on_creation():
      
      # Bad test names
      def test_user():  # Too vague
      def test_create():  # Missing context
      def test_it_works():  # Not descriptive
      ```

      **Test Organization:**
      ```
      tests/
      ‚îú‚îÄ‚îÄ unit/                     # Unit tests
      ‚îÇ   ‚îú‚îÄ‚îÄ test_models.py
      ‚îÇ   ‚îú‚îÄ‚îÄ test_services.py
      ‚îÇ   ‚îî‚îÄ‚îÄ test_utils.py
      ‚îú‚îÄ‚îÄ integration/              # Integration tests
      ‚îÇ   ‚îú‚îÄ‚îÄ test_api.py
      ‚îÇ   ‚îî‚îÄ‚îÄ test_database.py
      ‚îî‚îÄ‚îÄ fixtures/                 # Test data
          ‚îú‚îÄ‚îÄ sample_users.json
          ‚îî‚îÄ‚îÄ test_models.pkl
      ```

  - type: suggest
    when: "code_quality"
    message: |
      **Code Quality Standards:**

      **Import Organization:**
      ```python
      # Standard library imports
      import os
      import sys
      from datetime import datetime
      from typing import List, Dict, Optional
      
      # Third-party imports
      import django
      from django.db import models
      from django.contrib.auth import get_user_model
      
      # Local application imports
      from .models import User, Profile
      from .services import UserService
      from .utils import helpers
      ```

      **Function Documentation:**
      ```python
      def create_user(user_data: Dict[str, Any]) -> User:
          """
          Create a new user with validation and email notification.
          
          Args:
              user_data: Dictionary containing user information
                  - email: User's email address
                  - name: User's full name
                  - password: User's password
          
          Returns:
              User: Created user instance
          
          Raises:
              ValidationError: If user data is invalid
              BusinessLogicError: If user already exists
          
          Example:
              user_data = {
                  'email': 'user@example.com',
                  'name': 'John Doe',
                  'password': 'securepass123'
              }
              user = create_user(user_data)
          """
          # Implementation here
          pass
      ```

      **Error Handling:**
      ```python
      def process_user_request(request_data: Dict) -> Dict:
          try:
              # Validate input
              if not validate_request(request_data):
                  raise ValidationError("Invalid request data")
              
              # Process request
              result = process_data(request_data)
              
              logger.info(f"Successfully processed request: {request_data['id']}")
              return result
              
          except ValidationError as e:
              logger.warning(f"Validation error: {e}")
              raise
          except Exception as e:
              logger.error(f"Unexpected error: {e}")
              raise ProcessingError(f"Failed to process request: {str(e)}")
      ```

  - type: suggest
    when: "development_workflow"
    message: |
      **Development Workflow:**

      **Feature Development Process:**
      1. **Create Feature Branch:**
         ```bash
         git checkout -b feature/user-authentication
         ```

      2. **Follow Development Standards:**
         - Write tests first (TDD approach)
         - Follow naming conventions
         - Add comprehensive documentation
         - Ensure code quality standards

      3. **Run Quality Checks:**
         ```bash
         # Run linting
         flake8 src/
         black --check src/
         
         # Run tests
         pytest
         
         # Check coverage
         pytest --cov=src --cov-report=term-missing
         ```

      4. **Commit Changes:**
         ```bash
         git add .
         git commit -m "feat(auth): add JWT token authentication"
         ```

      5. **Create Pull Request:**
         - Include comprehensive description
         - Link related issues
         - Request code review

      **Code Review Checklist:**
      - [ ] Code follows project standards
      - [ ] Tests are included and passing
      - [ ] Documentation is updated
      - [ ] No security vulnerabilities
      - [ ] Performance considerations addressed
      - [ ] Error handling is comprehensive

examples:
  - input: |
      # Poor commit message
      git commit -m "fix bug"
    output: "Use conventional commit format: fix(scope): specific description"

  - input: |
      # AI attribution in commit
      git commit -m "feat: add auth - Co-authored-by: Claude"
    output: "NEVER include AI assistant attribution in commit messages"

  - input: |
      # Mentioning AI in commit
      git commit -m "fix: resolve issue with AI help"
    output: "NEVER mention AI assistants in commit messages"

  - input: |
      # Poor file naming
      userService.py
    output: "Use snake_case for Python files: user_service.py"

  - input: |
      # Missing file header
      import os
      import sys
    output: "Add comprehensive file header documentation"

  - input: |
      # Poor test structure
      def test_user():
          user = User()
          assert user
    output: "Use AAA pattern and descriptive test names"

metadata:
  priority: high
  version: 1.0
</rule>
description:
globs:
alwaysApply: false
---
